import React, { Component } from "react";
import { View, Text, Image, StyleSheet,StatusBar ,ActivityIndicator, TouchableOpacity, AsyncStorage} from "react-native";
import Layout from '../Components/Layout';
import NavigationService from '../Configs/NavigationService';
import { Container, Header, Content, Card, CardItem, Thumbnail, Button, Icon, Left, Body, Right, H3 } from 'native-base';
import { Mutation } from 'react-apollo';
import gql from "graphql-tag";
import Setting from '../Configs/settings';

const AUTH_MUTATION = gql`
mutation singIxn($email: String!, $password: String! ) {
  signIn(input: {email: $email, password: $password}) {
    accessToken
    errors
  }
}
`;


class CallLogin extends Component {

  componentDidMount() {
    this.props.login();
  }a

  render() {
    return this.props.children;
  }
}

export default function Authenticator({ render }) {
  return (
    <Layout>
      <Mutation mutation={AUTH_MUTATION}
                variables= {{email: Setting.username, password: Setting.password}}
      >
        {(login, { data, error }) => (
            <CallLogin login={login}>
              <View></View>
            </CallLogin>
        )}
    </Mutation>
    </Layout>
  );
}
